claude_code:
  binary_path: claude
  model: claude-sonnet-4-5-20250929
  night_start_hour: 1
  night_end_hour: 9
  threshold_day: 20.0
  threshold_night: 80.0
  usage_command: claude /usage

git:
  enabled: false  # Set to true to enable git commits and branching
  use_remote_repo: true
  remote_repo_url: git@github.com:TimeLovercc/test5.git # !!!CHANGE THIS!!!
  auto_create_repo: true

agent:
  workspace_root: ./workspace
  task_timeout_seconds: 1800

retry:
  max_attempts: 3  # Maximum total attempts (including first execution)
  base_delay_seconds: 30.0  # Initial delay before first retry
  max_delay_seconds: 3600.0  # Maximum delay between retries (1 hour)
  exponential_base: 2.0  # Multiplier for exponential backoff
  jitter_factor: 0.1  # Random jitter to prevent thundering herd (Â±10%)

multi_agent_workflow:
  planner:
    enabled: true
    max_turns: 10
  worker:
    enabled: true
    max_turns: 30
  evaluator:
    enabled: true
    max_turns: 10

# Human-in-the-loop checkpoints for approval before critical operations
checkpoints:
  enabled: true
  global_defaults:
    post_plan: false  # Require approval after planning phase
    pre_commit: true  # Require approval before committing changes
    pre_pr: true  # Require approval before creating pull requests
  timeout_minutes: 60  # How long to wait for approval
  timeout_behavior: notify  # proceed | abort | notify
  poll_interval_seconds: 5.0  # How often to check for approval

# Proactive progress notifications to Slack
notifications:
  enabled: true
  phase_notifications: true  # Notify on phase transitions (planning, executing, etc.)
  milestone_notifications: true  # Notify on significant milestones
  blocker_notifications: true  # Notify on blockers (rate limits, errors)
  heartbeat_enabled: true  # Send periodic "still working" signals
  heartbeat_interval_minutes: 10  # Minutes between heartbeat messages
  batch_window_seconds: 5.0  # Time window for batching rapid notifications
  min_phase_duration_seconds: 30.0  # Minimum time in phase before notifying

# Task templates for common workflows
templates:
  enabled: true
  # Additional template directories (beyond builtin)
  user_templates_dir: ~/.sleepless/templates
  project_templates_dir: .sleepless/templates

# Codebase context injection for task prompts
context:
  enabled: true
  cache_ttl_minutes: 60  # How long to cache extracted context (1 hour)
  structure:
    enabled: true
    max_depth: 4  # Maximum directory depth to traverse
  conventions:
    enabled: true
  git:
    enabled: true
    commit_limit: 10  # Number of recent commits to include
    file_limit: 20  # Number of recently modified files to track

auto_generation:
  enabled: true
  prompts:
    - name: refine_focused
      prompt: |-
        The workspace has multiple ongoing projects and tasks that need attention.

        ## Current State
        - Active tasks: {task_count} ({pending_count} pending, {in_progress_count} in progress)
        - Many tasks are already in progress or pending

        ## Available Tasks to Refine
        {available_tasks}

        ## Recent Work & Context
        {recent_work}

        ## Workspace Constraints
        - Tasks execute in isolated directories: workspace/tasks/<task_id>/
        - Each task only has access to its own workspace folder and workspace/shared/
        - Do NOT reference workspace/data/ or other system directories in task descriptions
        - REFINE tasks reuse existing task workspaces (no new folder created)

        ## Task Generation
        Generate ONE REFINE task to continue or improve existing work:
        - Complete partial/incomplete tasks mentioned above
        - Follow up on outstanding items and recommendations
        - Enhance or improve existing projects in the workspace
        - Fix issues or improve quality of current work
        - Add missing components to existing implementations
        - Expand documentation or analysis from previous tasks

        IMPORTANT Format Requirements:
        - To refine a specific task: Use [REFINE:#<task_id>] followed by description
          Example: [REFINE:#2] Improve error handling and add edge case tests
        - For general refinements: Use [REFINE] followed by description
        - Your response MUST be 1-2 sentences max

        Focus on completing or improving what already exists rather than starting new projects.
      weight: 0.45
    - name: balanced
      prompt: |-
        Review the workspace state and generate a valuable task.

        ## Current State
        - Active tasks: {task_count} ({pending_count} pending, {in_progress_count} in progress)

        ## Available Tasks to Refine
        {available_tasks}

        ## Recent Work & Context
        {recent_work}

        ## Workspace Constraints
        - Tasks execute in isolated directories: workspace/tasks/<task_id>/
        - Each task only has access to its own workspace folder and workspace/shared/
        - Do NOT reference workspace/data/ or other system directories in task descriptions
        - REFINE tasks reuse existing task workspaces (no new folder created)

        ## Task Generation
        Generate ONE valuable task (NEW or REFINE):
        - For REFINE: improve existing work, complete partial tasks, enhance current projects
        - For NEW: create something useful, interesting, or educational

        Task categories to consider:
        - Software development (applications, scripts, tools, APIs)
        - Data analysis and visualization projects
        - Research and documentation (technical guides, comparisons, best practices)
        - Creative writing (stories, tutorials, technical articles)
        - System design and architecture documents
        - Educational content and examples
        - Automation and productivity improvements
        - Analysis and evaluation reports

        IMPORTANT Format Requirements:
        - To refine a specific task: Use [REFINE:#<task_id>] followed by description
          Example: [REFINE:#1] Add comprehensive testing suite with edge cases
        - For general refinements: Use [REFINE] followed by description
        - For new tasks: Use [NEW] followed by description
        - Your response MUST be 1-2 sentences max
      weight: 0.35
    - name: new_friendly
      prompt: |-
        Generate an interesting and valuable task for the workspace.

        ## Current State
        - Active tasks: {task_count} ({pending_count} pending, {in_progress_count} in progress)
        - Few tasks in queue - good time for new projects!

        ## Available Tasks to Refine
        {available_tasks}

        ## Workspace Constraints
        - Tasks execute in isolated directories: workspace/tasks/<task_id>/
        - Each task only has access to its own workspace folder and workspace/shared/
        - Do NOT reference workspace/data/ or other system directories in task descriptions
        - REFINE tasks reuse existing task workspaces (no new folder created)

        ## Task Generation
        Generate ONE innovative task that creates value.

        Areas to explore:
        - Build practical tools and utilities
        - Create educational content and tutorials
        - Develop software applications or scripts
        - Write comprehensive documentation or guides
        - Design systems and architectures
        - Analyze and compare technologies or approaches
        - Generate creative content (technical writing, examples)
        - Research and summarize complex topics
        - Create data visualizations or analysis
        - Develop proof-of-concepts or experiments

        Can be NEW (fresh project) or REFINE (improve existing work) - choose what would be most valuable.

        IMPORTANT Format Requirements:
        - To refine a specific task: Use [REFINE:#<task_id>] followed by description
          Example: [REFINE:#3] Expand analysis with performance benchmarks
        - For general refinements: Use [REFINE] followed by description
        - For new tasks: Use [NEW] followed by description
        - Your response MUST be 1-2 sentences max
      weight: 0.20